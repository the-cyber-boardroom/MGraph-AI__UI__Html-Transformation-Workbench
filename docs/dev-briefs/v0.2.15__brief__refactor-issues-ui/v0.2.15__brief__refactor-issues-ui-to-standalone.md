# LLM Brief: Refactor Issues UI to Standalone Application

**Version**: v0.2.15
**For**: UI Development LLM
**Date**: January 31, 2026

---

## Overview

This is an **IFD Major Version Refactor**. The goal is to extract the issues tracking UI components from the HTML Transformation Workbench (`v0/v0.1/v0.1.x`) and consolidate them into a new standalone application at:

```
mgraph_ai_ui_html_transformation_workbench__ui/issues_ui/
```

The new `issues_ui` application will follow the IFD (Iterative Flow Development) methodology with its own versioning, starting fresh with `v0.1.0` that contains all consolidated issue tracking code.

---

## Current State

### Files to Extract (from v0/v0.1/)

**v0.1.6** (original issue tracking):
```
v0.1.6/js/markdown-parser.js       # Markdown to HTML service
v0.1.6/js/issue-service.js         # Legacy issue service (static JSON)
v0.1.6/components/kanban-board/    # Kanban view
v0.1.6/components/issue-detail/    # Issue detail view
v0.1.6/components/version-viewer/  # Version viewer
v0.1.6/css/shell.css               # Left nav layout styles
```

**v0.1.7** (graph-based API integration):
```
v0.1.7/js/graph-service.js                    # Graph API client
v0.1.7/components/node-list/node-list.js      # List view with filters
v0.1.7/components/node-detail/node-detail.js  # Detail view with links
v0.1.7/components/create-node-modal/          # Create modal
v0.1.7/components/shell/workbench-shell.js    # Nav overrides
```

---

## Target Structure

```
mgraph_ai_ui_html_transformation_workbench__ui/
├── v0/                          # Existing workbench (keep as-is)
│   └── v0.1/
│       ├── v0.1.0/
│       ├── ...
│       └── v0.1.7/
│
└── issues_ui/                   # NEW: Standalone issues application
    └── v0/
        └── v0.1/
            └── v0.1.0/          # Consolidated v0.1.0 (IFD major refactor)
                ├── index.html
                ├── css/
                │   └── app.css
                ├── js/
                │   ├── event-bus.js
                │   ├── markdown-parser.js
                │   └── graph-service.js
                └── components/
                    ├── shell/
                    │   └── issues-shell.js
                    ├── node-list/
                    │   └── node-list.js
                    ├── node-detail/
                    │   └── node-detail.js
                    └── create-node-modal/
                        └── create-node-modal.js
```

---

## What "IFD Major Refactor" Means

In IFD methodology, minor versions (`v0.1.x`) are **surgical overrides** - each version only contains files that change from the previous version, with later versions loading earlier versions first.

A **major refactor** is when you consolidate all those surgical overrides back into a single `v0.1.0`, creating a clean baseline for future development. This:

1. **Consolidates** all scattered overrides into one cohesive codebase
2. **Simplifies** the include chain (no more `../v0.1.0/` references)
3. **Resets** the version counter for the new application
4. **Enables** independent versioning from the parent application

---

## Implementation Steps

### Step 1: Create Directory Structure

```bash
mkdir -p mgraph_ai_ui_html_transformation_workbench__ui/issues_ui/v0/v0.1/v0.1.0/{css,js,components/{shell,node-list,node-detail,create-node-modal}}
```

### Step 2: Create Core Services

#### `js/event-bus.js`
Copy and adapt from `v0/v0.1/v0.1.0/js/event-bus.js`:
- Keep the EventBus class
- Change namespace from `workbench` to `issuesApp`
- Initialize as `window.issuesApp.events`

#### `js/markdown-parser.js`
Copy from `v0/v0.1/v0.1.6/js/markdown-parser.js`:
- Change namespace from `workbench` to `issuesApp`
- Keep all parsing logic intact

#### `js/graph-service.js`
Copy and **fix** from `v0/v0.1/v0.1.7/js/graph-service.js`:
- **IMPORTANT**: Fix API_BASE from `/api` to `/nodes/api`
- Change namespace from `workbench` to `issuesApp`
- Keep all CRUD operations intact

### Step 3: Create Shell Component

Create `components/shell/issues-shell.js`:
- Simpler shell focused only on issues
- Left navigation with: Issues List, (optionally Kanban)
- No version switcher needed (this is the standalone app)
- Include header with link to API docs (`/docs`)

### Step 4: Consolidate Components

#### `components/node-list/node-list.js`
Merge and consolidate from v0.1.7:
- Full list view with type/status filters
- Search functionality
- Create button
- Reference `issuesApp.graph` instead of `workbench.graph`

#### `components/node-detail/node-detail.js`
Merge and consolidate from v0.1.7:
- Full detail view with editing
- Link management UI
- Status dropdown
- Reference `issuesApp.markdown` instead of `workbench.markdown`

#### `components/create-node-modal/create-node-modal.js`
Copy from v0.1.7:
- Type selector (bug/task/feature/person)
- Form fields
- Create via API

### Step 5: Create CSS

#### `css/app.css`
Consolidate styles from:
- `v0/v0.1/v0.1.6/css/shell.css` (left nav, layout)
- Component styles from each component file

Move inline styles from components to this central CSS file for better maintainability.

### Step 6: Create index.html

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Issue Tracker</title>
    <link rel="stylesheet" href="css/app.css">
</head>
<body>
    <!-- Services -->
    <script src="js/event-bus.js"></script>
    <script src="js/markdown-parser.js"></script>
    <script src="js/graph-service.js"></script>

    <!-- Components -->
    <script src="components/shell/issues-shell.js"></script>
    <script src="components/node-list/node-list.js"></script>
    <script src="components/node-detail/node-detail.js"></script>
    <script src="components/create-node-modal/create-node-modal.js"></script>

    <!-- App -->
    <issues-shell></issues-shell>
    <create-node-modal></create-node-modal>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            window.issuesApp.router.register(NodeList);
            window.issuesApp.router.register(NodeDetail);
        });
    </script>
</body>
</html>
```

---

## Bug Fixes to Include in v0.1.0

These bugs from the workbench version should be fixed in the consolidated code:

### Bug-1: Add link to open API docs
- Add a link in the shell header to open `/docs`
- Example: `<a href="/docs" target="_blank">API Docs</a>`

### Bug-2: Fix incorrect API URL path
- Change `const API_BASE = '/api';` to `const API_BASE = '/nodes/api';`
- This is critical for the API calls to work

---

## Key Differences from Workbench Version

| Aspect | Workbench (v0/v0.1) | Issues UI (issues_ui/v0/v0.1) |
|--------|---------------------|-------------------------------|
| Namespace | `window.workbench` | `window.issuesApp` |
| Shell | `workbench-shell` with all apps | `issues-shell` with issues only |
| Focus | HTML transformation + issues | Issues tracking only |
| API Base | `/api` (incorrect) | `/nodes/api` (correct) |
| Version strategy | Surgical overrides across 7+ versions | Consolidated v0.1.0 |

---

## Validation Checklist

After implementation, verify:

- [ ] `issues_ui/v0/v0.1/v0.1.0/index.html` loads without errors
- [ ] Node list displays nodes from `/nodes/api/nodes`
- [ ] Create modal creates new nodes via POST
- [ ] Node detail shows full node info and links
- [ ] Status dropdown updates nodes via PATCH
- [ ] Link creation/deletion works
- [ ] "API Docs" link opens `/docs` in new tab
- [ ] No references to `workbench` namespace (all should be `issuesApp`)

---

## Future Versioning

After v0.1.0 is established, future changes follow IFD:

```
issues_ui/v0/v0.1/
├── v0.1.0/    # Base (this refactor)
├── v0.1.1/    # Future: Add kanban view
├── v0.1.2/    # Future: Add graph visualization
└── ...
```

Each future version only contains changed files, loading from v0.1.0 as the base.

---

## Summary

This refactor:
1. Creates a standalone issue tracking application
2. Consolidates 7+ versions of surgical overrides into clean v0.1.0
3. Fixes known bugs (API URL, docs link)
4. Establishes independent versioning for issues UI
5. Simplifies the codebase for future development
