# Dev Brief: Issue Tracking & Version Documentation System

## Overview

This brief describes a file-system-based issue tracking and version documentation system to be integrated into the HTML Graph Transformation UI. The system enables structured communication between developer and Claude Code through JSON files and markdown documentation.

---

## Core Concepts

### 1. File System as Database
We're using the file system as our persistence layer — no external database required. All state is stored in JSON files that can be read via GET requests from the existing FastAPI backend.

### 2. Version-Centric Organization  
Each version folder is self-contained with its own README, changelog, and references to issues it addresses.

### 3. Structured Communication
JSON schemas provide a contract between human and AI for exchanging information about work done, issues, and status.

---

## File System Architecture

```
project-root/
│
├── dev-briefs/
│   ├── 001-issue-tracking-system/
│   │   ├── BRIEF.md                    # This document
│   │   ├── frontend-brief.md           # What can be done without backend changes
│   │   └── backend-brief.md            # API changes needed for full functionality
│   │
│   ├── 002-markdown-parser/
│   │   └── BRIEF.md
│   │
│   └── ...
│
├── issues/
│   ├── issues.json                     # Index/manifest of all issues
│   ├── labels.json                     # Label definitions
│   ├── issue-001.json
│   ├── issue-002.json
│   ├── issue-003.json
│   └── ...
│
├── versions/
│   ├── v1.0.0/
│   │   ├── README.md                   # Release notes, human-readable
│   │   ├── changelog.json              # Structured: files changed, issues addressed
│   │   └── ...source files...
│   │
│   ├── v1.1.0/
│   │   ├── README.md
│   │   ├── changelog.json
│   │   └── ...source files...
│   │
│   └── ...
│
└── VERSION                             # Current version identifier
```

---

## Data Flow Architecture

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              USER INTERFACE                                  │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐  │
│  │   Issues    │    │   Kanban    │    │  Version    │    │  Dev Brief  │  │
│  │   List      │    │   Board     │    │  Viewer     │    │  Viewer     │  │
│  └──────┬──────┘    └──────┬──────┘    └──────┬──────┘    └──────┬──────┘  │
│         │                  │                  │                  │         │
└─────────┼──────────────────┼──────────────────┼──────────────────┼─────────┘
          │                  │                  │                  │
          ▼                  ▼                  ▼                  ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                           SERVICE LAYER                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐  │
│  │   Issue     │    │  Markdown   │    │  Changelog  │    │  Dev Brief  │  │
│  │   Service   │    │  Parser     │    │  Service    │    │  Service    │  │
│  └──────┬──────┘    └──────┬──────┘    └──────┬──────┘    └──────┬──────┘  │
│         │                  │                  │                  │         │
└─────────┼──────────────────┼──────────────────┼──────────────────┼─────────┘
          │                  │                  │                  │
          ▼                  ▼                  ▼                  ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                         FILE SYSTEM (JSON/MD)                                │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐  │
│  │  /issues/   │    │ /versions/  │    │ /versions/  │    │/dev-briefs/ │  │
│  │  *.json     │    │  README.md  │    │changelog.json│   │  BRIEF.md   │  │
│  └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘  │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## JSON Schemas

### 1. Issue Schema (`issue-{id}.json`)

```json
{
  "id": "issue-001",
  "title": "Add README files to each release",
  "description": "Each version folder should contain a README.md with release notes...",
  "status": "in-progress",
  "labels": ["feature", "documentation"],
  "created": "2025-01-29T10:00:00Z",
  "updated": "2025-01-29T14:30:00Z",
  "targetVersion": "v1.2.0",
  "comments": [
    {
      "author": "human",
      "timestamp": "2025-01-29T12:00:00Z",
      "text": "Please prioritize this for the next release"
    },
    {
      "author": "claude-code",
      "timestamp": "2025-01-29T14:30:00Z", 
      "text": "Implementation started. Created template structure."
    }
  ],
  "checklist": [
    { "item": "Create README template", "done": true },
    { "item": "Generate README for v1.1.0", "done": false },
    { "item": "Add UI to view README", "done": false }
  ]
}
```

### 2. Issues Index (`issues.json`)

```json
{
  "lastUpdated": "2025-01-29T14:30:00Z",
  "nextId": 15,
  "issues": [
    { "id": "issue-001", "title": "Add README files to each release", "status": "in-progress" },
    { "id": "issue-002", "title": "Create markdown parser service", "status": "backlog" },
    { "id": "issue-003", "title": "Implement Kanban board view", "status": "todo" }
  ],
  "statusCounts": {
    "backlog": 5,
    "todo": 3,
    "in-progress": 2,
    "review": 1,
    "done": 4
  }
}
```

### 3. Labels Definition (`labels.json`)

```json
{
  "labels": [
    { "name": "feature", "color": "#22c55e", "description": "New functionality" },
    { "name": "bug", "color": "#ef4444", "description": "Something isn't working" },
    { "name": "documentation", "color": "#3b82f6", "description": "Documentation updates" },
    { "name": "backend", "color": "#f59e0b", "description": "Requires backend changes" },
    { "name": "frontend", "color": "#8b5cf6", "description": "UI/frontend work" },
    { "name": "blocked", "color": "#6b7280", "description": "Blocked by dependency" }
  ]
}
```

### 4. Version Changelog (`changelog.json`)

```json
{
  "version": "v1.2.0",
  "date": "2025-01-29",
  "summary": "Added issue tracking system and version documentation",
  "issuesAddressed": [
    {
      "id": "issue-001",
      "title": "Add README files to each release",
      "status": "done"
    },
    {
      "id": "issue-003",
      "title": "Implement Kanban board view",
      "status": "review"
    }
  ],
  "filesChanged": [
    {
      "path": "src/components/KanbanBoard.tsx",
      "action": "created",
      "description": "New component for displaying issues in Kanban format",
      "relatedIssues": ["issue-003"]
    },
    {
      "path": "src/services/issueService.ts",
      "action": "created", 
      "description": "Service for loading and managing issue JSON files",
      "relatedIssues": ["issue-001", "issue-003"]
    },
    {
      "path": "src/components/VersionViewer.tsx",
      "action": "modified",
      "description": "Added README rendering and issue list display",
      "relatedIssues": ["issue-001"]
    }
  ]
}
```

---

## Kanban Workflow

### Status Flow

```
┌──────────────────────────────────────────────────────────────────────────────┐
│                           KANBAN BOARD                                        │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  BACKLOG       TODO          IN-PROGRESS     REVIEW         DONE            │
│  ────────      ────          ───────────     ──────         ────            │
│                                                                              │
│  ┌────────┐    ┌────────┐    ┌────────┐     ┌────────┐     ┌────────┐      │
│  │ ISS-05 │    │ ISS-03 │    │ ISS-01 │     │ ISS-07 │     │ ISS-02 │      │
│  │        │───▶│        │───▶│        │────▶│        │────▶│        │      │
│  │ Future │    │ Queued │    │ Active │     │ QA     │     │ Done   │      │
│  └────────┘    └────────┘    └────────┘     └────────┘     └────────┘      │
│                                                                              │
│  ┌────────┐    ┌────────┐    ┌────────┐                    ┌────────┐      │
│  │ ISS-06 │    │ ISS-04 │    │ ISS-08 │                    │ ISS-09 │      │
│  └────────┘    └────────┘    └────────┘                    └────────┘      │
│                                                                              │
│  ┌────────┐                                                                  │
│  │ ISS-10 │                                                                  │
│  └────────┘                                                                  │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
```

### Status Definitions

| Status | Owner | Description |
|--------|-------|-------------|
| `backlog` | Human | Future work, not yet prioritized |
| `todo` | Claude Code | Queued for implementation |
| `in-progress` | Claude Code | Currently being worked on |
| `review` | Human | Implementation complete, needs QA |
| `done` | Human | Verified and accepted |

### Transition Rules

```
                    Human assigns
         ┌────────────────────────────┐
         │                            ▼
     BACKLOG ─────────────────────▶ TODO
         ▲                            │
         │                            │ Claude Code starts
         │                            ▼
         │                       IN-PROGRESS
         │                            │
         │  Needs more info           │ Claude Code completes
         └────────────────────────────┤
                                      ▼
                                   REVIEW
                                      │
                    ┌─────────────────┼─────────────────┐
                    │                 │                 │
                    ▼                 ▼                 ▼
              BACK TO TODO      NEEDS-INFO           DONE
              (rework needed)   (questions)     (accepted)
```

---

## UI Components Required

### 1. Version Viewer Panel

```
┌─────────────────────────────────────────────────────────────────┐
│  Version Viewer                                          [v1.2.0 ▼] │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─── README ─────────────────────────────────────────────────┐ │
│  │                                                             │ │
│  │  # Release v1.2.0                                          │ │
│  │                                                             │ │
│  │  ## Features                                                │ │
│  │  - Added issue tracking system                              │ │
│  │  - Implemented Kanban board view                            │ │
│  │                                                             │ │
│  │  ## Bug Fixes                                               │ │
│  │  - Fixed graph rendering on mobile                          │ │
│  │                                                             │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
│  ┌─── Issues in this Release ─────────────────────────────────┐ │
│  │                                                             │ │
│  │  ✓ ISS-001  Add README files to each release      [done]   │ │
│  │  ◐ ISS-003  Implement Kanban board view          [review]  │ │
│  │  ✓ ISS-007  Fix mobile graph rendering            [done]   │ │
│  │                                                             │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
│  ┌─── Files Changed ──────────────────────────────────────────┐ │
│  │                                                             │ │
│  │  + src/components/KanbanBoard.tsx                          │ │
│  │  + src/services/issueService.ts                            │ │
│  │  ~ src/components/VersionViewer.tsx                        │ │
│  │                                                             │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 2. Kanban Board Panel

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  Issue Board                                    [Filter: All ▼] [+ New Issue] │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  BACKLOG (3)    TODO (2)       IN-PROGRESS (1)  REVIEW (1)     DONE (4)    │
│  ───────────    ────────       ──────────────   ──────────     ─────────   │
│                                                                             │
│  ┌───────────┐  ┌───────────┐  ┌───────────┐   ┌───────────┐  ┌─────────┐ │
│  │ ISS-010   │  │ ISS-003   │  │ ISS-001   │   │ ISS-007   │  │ ISS-002 │ │
│  │───────────│  │───────────│  │───────────│   │───────────│  │─────────│ │
│  │ Add dark  │  │ Kanban    │  │ README    │   │ Mobile    │  │ Parser  │ │
│  │ mode      │  │ board     │  │ files     │   │ fix       │  │ service │ │
│  │           │  │           │  │           │   │           │  │         │ │
│  │ [feature] │  │ [feature] │  │ [feature] │   │ [bug]     │  │ [done]  │ │
│  │ v1.4.0    │  │ v1.2.0    │  │ v1.2.0    │   │ v1.2.0    │  │ v1.1.0  │ │
│  └───────────┘  └───────────┘  └───────────┘   └───────────┘  └─────────┘ │
│                                                                             │
│  ┌───────────┐  ┌───────────┐                                 ┌─────────┐ │
│  │ ISS-011   │  │ ISS-004   │                                 │ ISS-005 │ │
│  │───────────│  │───────────│                                 │─────────│ │
│  │ Export    │  │ Backend   │                                 │ Initial │ │
│  │ feature   │  │ API       │                                 │ setup   │ │
│  └───────────┘  └───────────┘                                 └─────────┘ │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3. Issue Detail Panel

```
┌─────────────────────────────────────────────────────────────────┐
│  ISS-001: Add README files to each release              [Edit]  │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Status: [in-progress ▼]     Target: [v1.2.0 ▼]                │
│  Labels: [feature] [documentation]                              │
│                                                                 │
│  ─────────────────────────────────────────────────────────────  │
│                                                                 │
│  Description:                                                   │
│  Each version folder should contain a README.md with release    │
│  notes, features added, bugs fixed, and any breaking changes.   │
│                                                                 │
│  ─────────────────────────────────────────────────────────────  │
│                                                                 │
│  Checklist:                                                     │
│  [x] Create README template                                     │
│  [ ] Generate README for v1.1.0                                 │
│  [ ] Add UI to view README                                      │
│                                                                 │
│  ─────────────────────────────────────────────────────────────  │
│                                                                 │
│  Comments:                                                      │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ human • 2 hours ago                                      │   │
│  │ Please prioritize this for the next release              │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ claude-code • 30 min ago                                 │   │
│  │ Implementation started. Created template structure.      │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  [Add comment...]                                               │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## Implementation Phases

### Phase 1: Frontend Only (No Backend Changes)

Everything below can be implemented using existing GET capabilities:

| Task | Description |
|------|-------------|
| Create `/issues/` folder structure | Initialize with `issues.json`, `labels.json` |
| Issue Service | Load/parse issue JSON files |
| Markdown Parser Service | Simple parser for headers, bullets, bold, links |
| Kanban Board Component | Read-only view of issues by status |
| Version Viewer Component | Display README + changelog for selected version |
| Issue Detail Component | Read-only view of single issue |

### Phase 2: Backend API (Requires FastAPI Changes)

These features require new API endpoints:

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/api/issues` | GET | List all issues |
| `/api/issues/{id}` | GET | Get single issue |
| `/api/issues` | POST | Create new issue |
| `/api/issues/{id}` | PATCH | Update issue (status, comments, etc.) |
| `/api/issues/{id}/comments` | POST | Add comment to issue |

---

## Services to Create

### 1. Markdown Parser Service

```
┌──────────────────────────────────────────────────────────────────┐
│                     MARKDOWN PARSER SERVICE                       │
├──────────────────────────────────────────────────────────────────┤
│                                                                  │
│  Input: Raw Markdown String                                      │
│                                                                  │
│      # Header 1                                                  │
│      ## Header 2                                                 │
│      - Bullet point                                              │
│      **bold text**                                               │
│      [link](url)                                                 │
│                                                                  │
│                         │                                        │
│                         ▼                                        │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │  parseMarkdown(md: string): HTMLElement                     │ │
│  │                                                             │ │
│  │  Supported:                                                 │ │
│  │    - Headers (h1-h6)                                        │ │
│  │    - Bullet lists (ul/li)                                   │ │
│  │    - Numbered lists (ol/li)                                 │ │
│  │    - Bold (**text**)                                        │ │
│  │    - Italic (*text*)                                        │ │
│  │    - Links [text](url)                                      │ │
│  │    - Code blocks (```)                                      │ │
│  │    - Inline code (`)                                        │ │
│  │    - Paragraphs                                             │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                  │
│                         │                                        │
│                         ▼                                        │
│                                                                  │
│  Output: Rendered HTML                                           │
│                                                                  │
│      <h1>Header 1</h1>                                          │
│      <h2>Header 2</h2>                                          │
│      <ul><li>Bullet point</li></ul>                             │
│      <strong>bold text</strong>                                  │
│      <a href="url">link</a>                                     │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

### 2. Issue Service

```
┌──────────────────────────────────────────────────────────────────┐
│                       ISSUE SERVICE                               │
├──────────────────────────────────────────────────────────────────┤
│                                                                  │
│  Methods:                                                        │
│                                                                  │
│  ┌────────────────────────────────────────────────────────────┐  │
│  │  getIssues(): Promise<Issue[]>                             │  │
│  │    - Loads issues.json                                     │  │
│  │    - Returns array of issue summaries                      │  │
│  └────────────────────────────────────────────────────────────┘  │
│                                                                  │
│  ┌────────────────────────────────────────────────────────────┐  │
│  │  getIssue(id: string): Promise<Issue>                      │  │
│  │    - Loads issue-{id}.json                                 │  │
│  │    - Returns full issue details                            │  │
│  └────────────────────────────────────────────────────────────┘  │
│                                                                  │
│  ┌────────────────────────────────────────────────────────────┐  │
│  │  getIssuesByStatus(status: Status): Promise<Issue[]>       │  │
│  │    - Filters issues by status                              │  │
│  │    - Used by Kanban board                                  │  │
│  └────────────────────────────────────────────────────────────┘  │
│                                                                  │
│  ┌────────────────────────────────────────────────────────────┐  │
│  │  getIssuesByVersion(version: string): Promise<Issue[]>     │  │
│  │    - Returns issues targeted for specific version          │  │
│  │    - Used by Version Viewer                                │  │
│  └────────────────────────────────────────────────────────────┘  │
│                                                                  │
│  ┌────────────────────────────────────────────────────────────┐  │
│  │  getLabels(): Promise<Label[]>                             │  │
│  │    - Loads labels.json                                     │  │
│  │    - Returns available labels with colors                  │  │
│  └────────────────────────────────────────────────────────────┘  │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

---

## Issue Checklist (Extracted from Brief)

The following issues should be created in the issue tracking system:

| ID | Title | Labels | Priority |
|----|-------|--------|----------|
| ISS-001 | Add README files to each release | feature, documentation | High |
| ISS-002 | Create markdown parser service | feature, frontend | High |
| ISS-003 | Implement Kanban board view | feature, frontend | High |
| ISS-004 | Create Issue Service | feature, frontend | High |
| ISS-005 | Version Viewer with README rendering | feature, frontend | Medium |
| ISS-006 | Issue Detail panel | feature, frontend | Medium |
| ISS-007 | Create changelog.json for each version | feature, documentation | Medium |
| ISS-008 | Backend API for issue CRUD | feature, backend | Low (Phase 2) |
| ISS-009 | QA checklist feature for reviews | feature, frontend | Low |
| ISS-010 | Version planning - map issues to future versions | feature, frontend | Low |

---

## Relationship Diagram: Issues ↔ Files ↔ Versions

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│                              RELATIONSHIPS                                   │
│                                                                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│                           ┌─────────────┐                                   │
│                           │   VERSION   │                                   │
│                           │   v1.2.0    │                                   │
│                           └──────┬──────┘                                   │
│                                  │                                          │
│                    ┌─────────────┼─────────────┐                            │
│                    │             │             │                            │
│                    ▼             ▼             ▼                            │
│             ┌───────────┐ ┌───────────┐ ┌───────────┐                       │
│             │  README   │ │ changelog │ │  Source   │                       │
│             │    .md    │ │   .json   │ │  Files    │                       │
│             └───────────┘ └─────┬─────┘ └───────────┘                       │
│                                 │                                           │
│                    ┌────────────┼────────────┐                              │
│                    │            │            │                              │
│                    ▼            ▼            ▼                              │
│             ┌───────────┐ ┌───────────┐ ┌───────────┐                       │
│             │  ISSUE    │ │  ISSUE    │ │  ISSUE    │                       │
│             │  ISS-001  │ │  ISS-003  │ │  ISS-007  │                       │
│             └─────┬─────┘ └─────┬─────┘ └─────┬─────┘                       │
│                   │             │             │                             │
│                   │    ┌────────┴────────┐    │                             │
│                   │    │                 │    │                             │
│                   ▼    ▼                 ▼    ▼                             │
│             ┌──────────────┐       ┌──────────────┐                         │
│             │    FILE      │       │    FILE      │                         │
│             │ KanbanBoard  │       │ issueService │                         │
│             │    .tsx      │       │    .ts       │                         │
│             └──────────────┘       └──────────────┘                         │
│                                                                             │
│  Legend:                                                                    │
│    VERSION contains README, changelog, source files                         │
│    changelog.json references ISSUES addressed in that version              │
│    ISSUES link to FILES they modified                                       │
│    FILES link back to ISSUES (bidirectional in changelog)                  │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## QA Review Checklist Template

When reviewing a version, the human reviewer should verify:

```
┌─────────────────────────────────────────────────────────────────┐
│  QA Review: v1.2.0                                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  General:                                                       │
│  [ ] All targeted issues marked as 'review' or 'done'          │
│  [ ] README.md accurately describes changes                     │
│  [ ] changelog.json matches actual file changes                │
│  [ ] No console errors in browser                               │
│                                                                 │
│  Per-Issue Review:                                              │
│                                                                 │
│  ISS-001: Add README files                                      │
│  [ ] README template created                                    │
│  [ ] README renders correctly in UI                             │
│  [ ] Markdown formatting works                                  │
│  Comments: _________________________________                    │
│                                                                 │
│  ISS-003: Kanban board                                          │
│  [ ] All status columns display                                 │
│  [ ] Issues appear in correct columns                           │
│  [ ] Issue cards show title, labels, version                    │
│  Comments: _________________________________                    │
│                                                                 │
│  Overall Status: [ ] Approved  [ ] Needs Rework                 │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## Summary

This system provides:

1. **Structured Communication** - JSON schemas for Claude Code to report work
2. **Issue Tracking** - Mini GitHub-like system using filesystem
3. **Version Documentation** - README + changelog per release  
4. **Visual Management** - Kanban board for tracking progress
5. **QA Workflow** - Review states and checklists
6. **Traceability** - Links between issues, files, and versions

The Phase 1 implementation requires no backend changes — everything works through existing GET endpoints reading JSON/MD files from the filesystem.
