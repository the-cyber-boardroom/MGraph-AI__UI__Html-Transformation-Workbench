# Claude Code Briefing: HTML Transformation Workbench Build

## Your Mission

You are the **Build Orchestrator** for the HTML Transformation Workbench project. Your job is to use **Claude Flow** to spin up a swarm of agents that will build this application in parallel, following the phased execution plan.

---

## Project Overview

The HTML Transformation Workbench is a modular web application with:
- **22 user stories** organized into 4 phases
- **Micro-frontend architecture** with independent mini apps
- **Event-driven communication** between components
- **Real backend APIs** (no mocks)

All story briefs are in the `stories/` folder. Each agent will receive:
1. `SHARED_BRIEFING.md` â€” Platform context (same for all)
2. `IFD_METHODOLOGY.md` â€” Development methodology (same for all)
3. `stories/{ID}_*.md` â€” Their specific story brief

---

## Phase Execution Plan

```
PHASE 1: FOUNDATION (Blocking - must complete first)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   F1 (Shell) â”€â”€â”
   F2 (Events) â”€â”¼â”€â”€ All parallel â”€â”€â–º F5 (Hello World Validation)
   F3 (API) â”€â”€â”€â”€â”¤
   F4 (Config) â”€â”˜

PHASE 2: DEBUG TOOLS + SETTINGS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   D1 (Events Viewer) â”€â”€â”
   D2 (API Logger) â”€â”€â”€â”€â”€â”¼â”€â”€ All parallel (after Phase 1)
   M1 (Settings) â”€â”€â”€â”€â”€â”€â”€â”˜

PHASE 3: CORE FUNCTIONALITY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FRONTEND                    BACKEND
   M2 (API Explorer) â”€â”€â”       B1 (Profile APIs) â”€â”€â”
   M3 (Workbench) â”€â”€â”€â”€â”€â”¼â”€â”€     B2 (Site API) â”€â”€â”€â”€â”€â”€â”¼â”€â”€ All parallel
   M4 (Profiles) â”€â”€â”€â”€â”€â”€â”¤                           â”‚
   M5 (Sites) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚

PHASE 4: ANALYSIS + SHARED COMPONENTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FRONTEND          BACKEND              SHARED
   M6 (Page) â”€â”€â”     B3 (Page Analysis)   S1 (HTML Editor) â”€â”€â”
   M7 (Site) â”€â”€â”˜     B4 (Site Analysis)   S2 (Graph Viz) â”€â”€â”€â”€â”¼â”€â”€ Parallel
                     B5 (Graph Gen)       S3 (Transform) â”€â”€â”€â”€â”˜
```

---

## Claude Flow Setup

### 1. Initialize the Swarm

First, understand the Claude Flow patterns available:

```bash
# Check available orchestration patterns
claude-flow orchestrate --help
```

### 2. Define Agent Roles

Create agents with specific roles:

```yaml
# agents/foundation-agent.yaml
role: foundation-builder
context:
  - SHARED_BRIEFING.md
  - IFD_METHODOLOGY.md
capabilities:
  - web-components
  - javascript
  - event-systems
```

```yaml
# agents/mini-app-agent.yaml
role: mini-app-builder
context:
  - SHARED_BRIEFING.md
  - IFD_METHODOLOGY.md
capabilities:
  - web-components
  - ui-development
  - event-driven-architecture
```

```yaml
# agents/backend-agent.yaml
role: backend-builder
context:
  - SHARED_BRIEFING.md
capabilities:
  - python
  - fastapi
  - rest-apis
```

### 3. Orchestration Strategy

Use Claude Flow's swarm orchestration to manage the build:

```bash
# Start Phase 1 agents in parallel
claude-flow swarm start \
  --agents foundation-f1,foundation-f2,foundation-f3,foundation-f4 \
  --parallel \
  --wait-for-completion

# After Phase 1 core, run validation
claude-flow swarm start \
  --agents foundation-f5 \
  --depends-on foundation-f1,foundation-f2,foundation-f3,foundation-f4

# Phase 2 (after F5 validates)
claude-flow swarm start \
  --agents debug-d1,debug-d2,mini-app-m1 \
  --parallel \
  --depends-on foundation-f5
```

---

## Output Structure

All agents should output to this structure:

```
workbench/
â”œâ”€â”€ v0.1.0/
â”‚   â”œâ”€â”€ index.html                 # Main entry point
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ shell/
â”‚   â”‚   â”‚   â”œâ”€â”€ workbench-shell.js
â”‚   â”‚   â”‚   â”œâ”€â”€ workbench-shell.test.js
â”‚   â”‚   â”‚   â””â”€â”€ nav-bar.js
â”‚   â”‚   â”œâ”€â”€ hello-world-1/
â”‚   â”‚   â”‚   â””â”€â”€ hello-world-1.js
â”‚   â”‚   â”œâ”€â”€ hello-world-2/
â”‚   â”‚   â”‚   â””â”€â”€ hello-world-2.js
â”‚   â”‚   â”œâ”€â”€ settings-panel/
â”‚   â”‚   â”‚   â””â”€â”€ settings-panel.js
â”‚   â”‚   â”œâ”€â”€ events-viewer/
â”‚   â”‚   â”‚   â””â”€â”€ events-viewer.js
â”‚   â”‚   â”œâ”€â”€ api-logger/
â”‚   â”‚   â”‚   â””â”€â”€ api-logger.js
â”‚   â”‚   â”œâ”€â”€ html-workbench/
â”‚   â”‚   â”‚   â””â”€â”€ html-workbench.js
â”‚   â”‚   â”œâ”€â”€ profile-manager/
â”‚   â”‚   â”‚   â””â”€â”€ profile-manager.js
â”‚   â”‚   â”œâ”€â”€ site-browser/
â”‚   â”‚   â”‚   â””â”€â”€ site-browser.js
â”‚   â”‚   â”œâ”€â”€ page-analysis/
â”‚   â”‚   â”‚   â””â”€â”€ page-analysis.js
â”‚   â”‚   â”œâ”€â”€ site-analysis/
â”‚   â”‚   â”‚   â””â”€â”€ site-analysis.js
â”‚   â”‚   â”œâ”€â”€ api-explorer/
â”‚   â”‚   â”‚   â””â”€â”€ api-explorer.js
â”‚   â”‚   â””â”€â”€ shared/
â”‚   â”‚       â”œâ”€â”€ html-editor/
â”‚   â”‚       â”‚   â””â”€â”€ html-editor.js
â”‚   â”‚       â”œâ”€â”€ graph-visualizer/
â”‚   â”‚       â”‚   â””â”€â”€ graph-visualizer.js
â”‚   â”‚       â””â”€â”€ transform-config/
â”‚   â”‚           â””â”€â”€ transform-config.js
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”œâ”€â”€ event-bus.js
â”‚   â”‚   â”œâ”€â”€ api-client.js
â”‚   â”‚   â””â”€â”€ config-manager.js
â”‚   â””â”€â”€ css/
â”‚       â””â”€â”€ shell.css
â””â”€â”€ tests/
    â””â”€â”€ index.html                 # Test runner
```

---

## Agent Task Definitions

### Phase 1 Tasks

#### F1: Shell & Router Agent
```
TASK: Build the foundation shell
INPUT: stories/F1_Foundation_Shell_Router.md
OUTPUT: 
  - v0.1.0/components/shell/workbench-shell.js
  - v0.1.0/components/shell/nav-bar.js
  - v0.1.0/index.html
VALIDATION: Shell renders, router.register() works
```

#### F2: Event Bus Agent
```
TASK: Build the event bus service
INPUT: stories/F2_Event_Bus_Service.md
OUTPUT: v0.1.0/js/event-bus.js
VALIDATION: emit/on/off/replay all work
```

#### F3: API Client Agent
```
TASK: Build the API client service
INPUT: stories/F3_API_Client_Service.md
OUTPUT: v0.1.0/js/api-client.js
VALIDATION: Can make authenticated API calls
```

#### F4: Config Manager Agent
```
TASK: Build the config manager service
INPUT: stories/F4_Config_Manager_Service.md
OUTPUT: v0.1.0/js/config-manager.js
VALIDATION: Persists to localStorage, emits events
```

#### F5: Hello World Agent
```
TASK: Build validation mini apps
INPUT: stories/F5_Hello_World_Validation_Apps.md
OUTPUT:
  - v0.1.0/components/hello-world-1/hello-world-1.js
  - v0.1.0/components/hello-world-2/hello-world-2.js
VALIDATION: Both apps work, events flow between them
DEPENDS_ON: F1, F2, F3, F4
```

### Phase 2-4 Tasks

Follow the same pattern for all remaining stories. Each agent:
1. Reads their story brief
2. Implements the component/API
3. Writes tests
4. Validates acceptance criteria

---

## Integration Checkpoints

After each phase, run integration validation:

### Phase 1 Checkpoint
```bash
# Verify foundation works
claude-flow validate \
  --test "Shell renders" \
  --test "Events emit and receive" \
  --test "API client makes calls" \
  --test "Config persists" \
  --test "Hello World apps navigate"
```

### Phase 2 Checkpoint
```bash
# Verify debug tools work
claude-flow validate \
  --test "Events Viewer shows events" \
  --test "API Logger shows API calls" \
  --test "Settings saves config"
```

### Phase 3 Checkpoint
```bash
# Verify core features work
claude-flow validate \
  --test "Can load/save HTML" \
  --test "Can create/edit profiles" \
  --test "Can browse sites"
```

### Phase 4 Checkpoint
```bash
# Verify analysis works
claude-flow validate \
  --test "Page analysis runs" \
  --test "Site analysis runs" \
  --test "Graphs render"
```

---

## Coordination Rules

### Event Contract Enforcement
All agents must respect the event contracts defined in `SHARED_BRIEFING.md`:
- Use exact event names as specified
- Include all required payload fields
- Never call methods on other components directly

### File Ownership
Each story owns specific files. Agents should NOT modify files owned by other stories:
- F1 owns: `workbench-shell.js`, `nav-bar.js`, `index.html`
- F2 owns: `event-bus.js`
- F3 owns: `api-client.js`
- etc.

### Dependency Waiting
If a story depends on another, the agent must wait:
```
M3 (HTML Workbench) depends on F1-F4 being complete
M4 (Profile Manager) depends on B1 (Profile APIs)
M6 (Page Analysis) depends on B3, B5, S2
```

---

## Swarm Communication

Agents can coordinate through:

1. **Shared State** â€” Use Claude Flow's state management
   ```bash
   claude-flow state set phase1.f1.complete true
   claude-flow state get phase1.f1.complete
   ```

2. **Message Passing** â€” Agents can send messages
   ```bash
   claude-flow message send --to f5-agent --content "F1 complete, shell ready"
   ```

3. **Dependency Signals** â€” Automatic dependency resolution
   ```bash
   claude-flow depends --story F5 --on F1,F2,F3,F4 --then start
   ```

---

## Error Handling

If an agent encounters an error:

1. **Log the error** to shared state
   ```bash
   claude-flow state set errors.f1 "Shell failed to render: missing nav-bar"
   ```

2. **Notify dependent agents** to pause
   ```bash
   claude-flow message broadcast --content "F1 blocked, dependencies wait"
   ```

3. **Request human intervention** if needed
   ```bash
   claude-flow escalate --reason "Need clarification on nav bar styling"
   ```

---

## Quick Start Commands

```bash
# 1. Initialize the project
claude-flow init workbench-build

# 2. Load all story briefs
claude-flow context load ./stories/*.md
claude-flow context load ./SHARED_BRIEFING.md
claude-flow context load ./IFD_METHODOLOGY.md

# 3. Create agent pool
claude-flow agents create \
  --count 5 \
  --role foundation-builder \
  --context SHARED_BRIEFING.md,IFD_METHODOLOGY.md

# 4. Assign Phase 1 tasks
claude-flow task assign f1-agent --story F1_Foundation_Shell_Router.md
claude-flow task assign f2-agent --story F2_Event_Bus_Service.md
claude-flow task assign f3-agent --story F3_API_Client_Service.md
claude-flow task assign f4-agent --story F4_Config_Manager_Service.md

# 5. Start Phase 1
claude-flow swarm start --phase 1 --parallel

# 6. Wait and validate
claude-flow swarm wait --phase 1
claude-flow validate --phase 1

# 7. Continue to Phase 2...
claude-flow task assign f5-agent --story F5_Hello_World_Validation_Apps.md
claude-flow swarm start --phase 1.5  # F5 only

# 8. Phase 2
claude-flow swarm start --phase 2 --parallel

# ... continue through all phases
```

---

## Success Criteria

The build is complete when:

1. âœ… All 22 stories implemented
2. âœ… All acceptance criteria pass
3. âœ… Integration tests pass for each phase
4. âœ… End-to-end flow works:
   - Configure API keys in Settings
   - Load HTML in Workbench
   - Create a profile in Profile Manager
   - Apply profile to HTML
   - View before/after comparison
   - Browse site pages
   - Run page analysis
   - View DOM graph
5. âœ… No console errors
6. âœ… Events Viewer shows clean event flow
7. âœ… API Logger shows all API calls succeeding

---

## Your First Steps

1. **Read this briefing completely**
2. **Explore the story briefs** in `stories/`
3. **Initialize Claude Flow** for this project
4. **Start Phase 1** with 4 parallel agents
5. **Monitor progress** and resolve blockers
6. **Validate** after each phase
7. **Report** completion status

You are the conductor. The agents are your orchestra. Make beautiful software together. ğŸ¼

---

*Good luck, Orchestrator!*
